#!/usr/bin/env bash

DIR="$( dirname ${BASH_SOURCE[0]} )"
source "$DIR/utils"

ROOT=$( get_project_root )
ENV_FILE="$DIR/.dev-env"

# lynx_list docker-based dev environment starter
#
#   1. docker-compose up -d (runs postgres and elixir containers)
#   2. Run fish, a friendly shell
#
# Note that if you have Elixir installed to your system, you may like to run
# only postgres as a container. In this case, `db` can be used instead of
# this script. (`down` will still work.)
#

# expands command line arguments passed to this file
ARGS="$@"

load_env $ENV_FILE

docker-compose \
    -p hacker_lynx_dev \
    -f "$ROOT/docker/dev/docker-compose.yml" \
    up $ARGS -d && \
  docker exec -it hacker_lynx_dev_app fish